# Архитектура решения

1. **Клиент и сервер:** CLI-приложения, написанные на Go. Клиент для подключения к серверу и обмена сообщениями. Сервер
   для координации клиентских подключений и передачи сообщений.

2. **Авторизация и шифрование:**
   - Использование JWT для авторизации без хранения данных на сервере.
   - Ed25519 для подписи сообщений.
   - ECDH (Elliptic Curve Diffie-Hellman) для обмена ключами.
   - End-to-end шифрование сообщений.

3. **Протокол и обмен данными:**
   - TCP/IP для обмена информацией.
   - gRPC или собственный бинарный протокол.

4. **Хранение данных:**
   - Не использовать базы данных для хранения истории чата или информации о пользователях.
   - Информация о пользователях передается через JWT. Пользователи не могут изменять свои данные.
   - История сообщений запрашивается у участников чата.

5. **Распределенная система:**
   - Пользователи регистрируются, отправляя информацию на сервер для получения JWT.
   - Сервер распространяет сообщения между участниками чата.

## Важные соображения при разработке

- **Безопасность:** Тщательно обрабатывайте все аспекты безопасности, особенно при реализации шифрования и обмена
  ключами.
- **Производительность:** Уделите внимание оптимизации производительности, используя возможности Go для параллельной
  обработки.
- **Тестирование:** Напишите тесты для всех важных частей вашего приложения, можно опустить пирамиду тестирования.

## Общее описание функциональности приложения:

### Серверное приложение

1. **Прослушивание сетевых подключений:**
   - Сервер должен уметь прослушивать определенный IP-адрес и порт, который указывает администратор при запуске.
   - Принимать входящие TCP-подключения от клиентов.

2. **Авторизация пользователей:**
   - Обработка запросов на регистрацию новых пользователей и выдача JWT-токенов.
   - Проверка JWT-токенов при каждом подключении для аутентификации пользователей.

3. **Пересылка сообщений:**
   - Прием сообщений от одного пользователя и их пересылка остальным пользователям в чате.
   - Сообщения не хранятся на сервере; они пересылаются в реальном времени.

4. **Обработка команд CLI:**
   - Возможность задать настройки сервера через команды CLI (например, IP, порт, имя сервера).

5. **Логирование и обработка ошибок:**
   - Запись логов о действиях и ошибках в файл рядом с приложением.
   - Опциональная отправка логов в систему сбора логов.

### Клиентское приложение

1. **Установление соединения с сервером:**
   - Возможность подключения к серверу по заданному IP-адресу и порту.

2. **Авторизация:**
   - Регистрация или вход пользователя с использованием JWT-токенов.

3. **Шифрование сообщений:**
   - Использование ECDH для обмена ключами и Ed25519 для подписи сообщений.
   - End-to-end шифрование сообщений перед отправкой на сервер.

4. **Интерфейс командной строки:**
   - Возможность выбора чата или создания нового чата.
   - Отправка и прием сообщений в реальном времени.

5. **Обработка сообщений:**
   - Подписание каждого отправляемого сообщения для подтверждения его подлинности.
   - Запрос истории сообщений у других участников чата, так как сервер не хранит историю.

### Общие черты

- **Распределенность:** Клиенты и сервер работают как полностью распределенная система без централизованного хранения
  данных.
- **Безопасность и конфиденциальность:** Все сообщения защищены end-to-end шифрованием, исключая возможность их чтения
  сервером или третьими лицами.
- **Масштабируемость:** Система спроектирована с учетом возможности масштабирования в будущем.
- **Простота развертывания:** Поддержка работы в среде Docker для удобства развертывания и тестирования.

Это приложение представляет собой распределенную систему чата с акцентом на безопасность, конфиденциальность и
минимальное использование серверных ресурсов для хранения данных.

